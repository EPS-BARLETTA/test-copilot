<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>EPS DataHub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./style.css">
</head>
<body>
<div class="app">
  <section id="cover" class="page visible">
    <div class="hero">
      <h1>EPS DataHub</h1>
      <p>Configurer, recueillir et partager des donn√©es compatibles ScanProf.</p>
      <div class="hero-actions">
        <button class="btn btn-green big" id="btnGoConfig">Configurer la s√©ance</button>
        <button class="btn btn-blue big" id="btnGoEntry">Saisie rapide (mode √©l√®ve)</button>
      </div>
    </div>
  </section>

  <section id="config" class="page">
    <header class="section-head">
      <div>
        <h2>Champs observables</h2>
        <p class="muted">Cr√©ez vos menus, partagez la configuration via QR puis laissez les √©l√®ves renseigner leurs r√©sultats.</p>
      </div>
      <div class="head-actions">
        <button class="btn btn-amber" id="btnBackCover1">‚¨Ö Accueil</button>
        <button class="btn btn-red" id="btnResetApp">üîÑ R√©initialiser</button>
        <button class="btn btn-blue" id="btnShareConfig">Partager la configuration</button>
      </div>
    </header>

    <div class="card">
      <div class="flex-between">
        <h3>Liste des champs</h3>
        <button class="btn btn-green small" id="btnAddField">+ Ajouter un champ</button>
      </div>
      <div id="fieldList"></div>
      <div class="chrono-toggle">
        <label class="toggle">
          <input type="checkbox" id="cfgChrono">
          <span>Activer le chrono/minuteur individuel</span>
        </label>
        <p class="muted small">Permet √† chaque √©l√®ve ou √©quipe de lancer un chrono depuis sa tablette.</p>
      </div>
      <p class="muted small">Menus d√©roulants : une option par ligne. Les abr√©viations QR sont g√©n√©r√©es automatiquement.</p>
    </div>
  </section>

  <section id="entry" class="page">
    <header class="section-head">
      <div>
        <h2>Saisie des observations</h2>
        <p id="sessionInfo" class="muted"></p>
      </div>
      <div class="head-actions">
        <button class="btn btn-amber" id="btnBackCover2">‚¨Ö Accueil</button>
        <button class="btn btn-blue" id="btnGoSummary">Voir le bilan</button>
      </div>
    </header>

    <div class="card">
      <div class="mode-switch">
        <button class="btn btn-blue" data-mode="indiv">Mode individuel</button>
        <button class="btn" data-mode="team">Mode collectif</button>
      </div>
      <div id="modeHint" class="muted small"></div>
    </div>

    <div id="indivPane" class="pane">
      <div class="card">
        <div class="flex-between">
          <h3>Participants</h3>
          <button class="btn btn-green small" id="btnAddParticipant">+ Ajouter un √©l√®ve</button>
        </div>
        <div id="participantTabs" class="tab-grid"></div>
        <div id="participantForm"></div>
      </div>
    </div>

    <div id="teamPane" class="pane">
      <div class="card">
        <div class="flex-between">
          <h3>√âquipes</h3>
          <button class="btn btn-green small" id="btnAddTeam">+ Ajouter une √©quipe</button>
        </div>
        <div id="teamTabs" class="tab-grid"></div>
        <div id="teamForm"></div>
      </div>
    </div>
  </section>

  <section id="summary" class="page">
    <header class="section-head">
      <div>
        <h2>Bilan & exports</h2>
        <p class="muted">Chaque QR est compatible ScanProf. Exportez √©galement un PDF complet.</p>
      </div>
      <div class="head-actions">
        <button class="btn btn-amber" id="btnBackEntry">‚¨Ö Retour saisie</button>
        <button class="btn btn-green" id="btnOpenPrint">PDF d√©taill√©</button>
      </div>
    </header>

    <div class="card">
      <h3>Participants</h3>
      <div id="summaryList" class="summary-list"></div>
    </div>
  </section>
</div>

<div class="modal" id="configQrModal">
  <div class="modal-content">
    <h3>QR configuration</h3>
    <p class="muted small">Scannez ce code pour charger automatiquement les param√®tres sur d‚Äôautres tablettes.</p>
    <div class="qr-box" id="configQrBox"></div>
    <div class="modal-actions">
      <button class="btn btn-blue" id="btnConfigQrClose">Fermer</button>
    </div>
  </div>
</div>

<div class="modal" id="entryQrModal">
  <div class="modal-content">
    <h3 id="entryQrTitle">QR √©l√®ve</h3>
    <p class="muted small" id="entryQrStatus"></p>
    <div class="qr-box" id="entryQrBox"></div>
    <div class="modal-actions">
      <button class="btn btn-light" id="btnEntryQrFullscreen">üñ•Ô∏è Plein √©cran</button>
      <button class="btn btn-blue" id="btnEntryQrClose">Fermer</button>
    </div>
  </div>
</div>

<script src="./lz-string.min.js"></script>
<script src="./qrcode.min.js"></script>
<script src="./scanprof-export.js"></script>
<script src="./app.js"></script>
</body>
</html>
